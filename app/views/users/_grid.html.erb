<%= grid(@users_grid, show_filters: :when_filtered, allow_showing_all_records: false) do |g|

  g.column :name => User.human_attribute_name('email'),
    :attribute => 'email' do |user|
      link_to(user.email, user_path(user))
  end

  g.column :name => User.human_attribute_name('mandator'), :attribute => 'mandator_id',
    :custom_filter => Mandator.all.map{|m| [m.name, m.id]} do |user|
        user.mandator_name
  end

  ['created_at', 'updated_at'].each do |attr|
    g.column :name => User.human_attribute_name(attr), :attribute => attr do |user|
      l(user[attr], format: :fdatetime) if !user[attr].nil?
    end
  end

  g.column :name => User.human_attribute_name('activated'),
    :attribute => 'activated' do |user|
      t(user.activated.to_s)
  end

  g.column html: {class: 'button-column'} do |user|
    link_to(image_tag('icons/page_white_edit.png'),
      edit_user_path(user), title: t('app.action.edit')
    ) + ' ' +
    link_to(image_tag('icons/page_white_delete.png'),
      user, title: t('app.action.delete'),
      method: :delete, data: {confirm: 'Are you sure?'}
    )
  end

end %>
