<h2>
  <%= Mandator.model_name.human(:count => 2) %>
  <% if can? :create, Mandator %>
    <span><%= link_to t('app.label.new_model', :model => Mandator.model_name.human), new_mandator_path, :class => 'icon new' %></span>
  <% end %>
</h2>
<%= grid(@mandators_grid, show_filters: :when_filtered, allow_showing_all_records: false) do |g|

  g.column :name => Mandator.human_attribute_name('name'),
    :attribute => 'name' do |mandator|
      link_to(mandator.name, mandator_path(mandator))
  end

  g.column :html => {class: 'numeric'}, :name => Mandator.human_attribute_name('user_count'),
    :attribute => 'id', :model => User, :filter => false do |mandator|
      mandator.user.count
  end

  ['created_at', 'updated_at'].each do |attr|
    g.column :html => {class: 'fdatetime'}, :name => Mandator.human_attribute_name(attr),
      :attribute => attr do |mandator|
        mandator[attr].nil? ? '' : l(mandator[attr], format: :fdatetime)
    end
  end

  g.column :html => {class: 'button'} do |mandator|
    link_to(image_tag('icons/page_white_show.png'),
      mandator_path(mandator), title: t('app.action.show')
    ) + ' ' +
    link_to(image_tag('icons/page_white_edit.png'),
      edit_mandator_path(mandator), title: t('app.action.edit')
    ) + ' ' +
    link_to(image_tag('icons/page_white_delete.png'),
      mandator, title: t('app.action.delete'),
      method: :delete, data: {confirm: t('app.confirm.are_you_sure')}
    )
  end

  if @mandators_grid.count == 0
    g.last_row do |number_of_columns|
      content_tag(:tr, content_tag(:td,
        t('app.messages.no_records_for_model', :model => Mandator.model_name.human(:count => 2)),
        :colspan => number_of_columns), :class => 'no_records')
    end
  end

end %>
