<%%
  model_name = <%= class_name %>.model_name.human

  action = @<%= singular_table_name %>.id.nil? ? 'new' : 'edit'
  legend = t("app.title.#{action}_instance", :instance => model_name)

%>
<%%= form_for(@<%= singular_table_name %>) do |f| %>
  <%%= render 'shared/form_errors', :instance => @<%= singular_table_name %> %>
  <%%= field_set_tag legend do %>
<% attributes.each do |attribute| -%>
    <div class="field">
      <%%= f.label :<%= attribute.name %> %>
      <%%= f.<%= attribute.field_type %> :<%= attribute.name %> %>
    </div>
<% end %>
    <div class="button">
      <%%= f.submit t(@<%= singular_table_name %>.id.nil? ? 'app.action.create' : 'app.action.update') %>
    </div>
  <%% end %>
<%% end %>
